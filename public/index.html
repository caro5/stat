<!DOCTYPE html>
<html ng-app="stackdApp">
  <head>
    <meta charset="utf-8">  <!-- it's important for d3.js -->
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/nvd3/build/nv.d3.js"></script> <!-- or use another assembly -->
    <script src="bower_components/angular-nvd3/dist/angular-nvd3.js"></script>
    <link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.css">

    <link href="./public/stylesheets/style.css" rel="stylesheet" type="text/css">
    <!-- // <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script> -->
   <script src="./public/pubApp.js"></script>
  </head>

  <body class="container" ng-controller="SearchController as searchCtrl">
    <div class="title">
      stackd
    </div>

    <div class="top-container" ng-show="searchCtrl.showData">
      <div class="topic">
        {{searchCtrl.newData.topic}}
      </div>

      <div class="search-again-button">
        <button ng-click="searchCtrl.showData = !searchCtrl.showData">Search Again</button>
      </div>
    </div>

    <div class="search-bar">
      <input ng-model="term" placeholder="enter term">
      <button ng-click="searchCtrl.search(term)">search</button>
    </div>

    <div class="chart" ng-show="searchCtrl.showData">
      <nvd3 options="searchCtrl.options" data="searchCtrl.data" refreshDataOnly="true" objectEquality="true"></nvd3>
    </div>

    <div class="bottom-container">
      <div class="dashboard section-1" ng-show="searchCtrl.showData">
        <div>
          Percentage: {{searchCtrl.data[0].values[0].value}}%
        </div>
        <div class="top-comment">
          Top Comment
          <p>{{searchCtrl.newData.topComment}}</p>
        </div>
      </div>

      <div class="top-values section-2" ng-show="searchCtrl.showData">
        <div>
          Top Values
          <ul>
            <li ng-repeat="value in searchCtrl.newData.topValues track by $index">{{value.key}}</li>
          </ul>
        </div>
      </div>

      <div class="comments section-3" ng-show="searchCtrl.showData">
        <div class="positive-comments">
          Positive Comments
          <ul>
            <li ng-repeat="comment in searchCtrl.newData.posComments track by $index">{{comment}}</li>
          </ul>
        </div>
        <div class="negative-comments">
          Negative Comments
          <ul>
            <li ng-repeat="comment in searchCtrl.newData.negComments track by $index">{{comment}}</li>
          </ul>
        </div>
      </div>
    </div>

  </body>
</html>